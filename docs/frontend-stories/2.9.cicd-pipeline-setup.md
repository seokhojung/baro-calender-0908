# Story 2.9: CI/CD íŒŒì´í”„ë¼ì¸ ë° ë°°í¬ ìë™í™”

## ğŸ“‹ ë¬¸ì„œ ì •ë³´
- **ìŠ¤í† ë¦¬ ë²„ì „**: 2.0
- **ì‘ì„±ì¼**: 2025-08-28
- **ì‘ì„±ì**: Bob (Scrum Master Agent)  
- **í”„ë¡œì íŠ¸ëª…**: ë°”ë¡œìº˜ë¦°ë” (Baro Calendar)
- **Epic**: í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬ ìë™í™”
- **ìƒíƒœ**: Ready for Development

---

## ğŸ¯ **ìŠ¤í† ë¦¬ ëª©í‘œ**

**ì™„ì „í•œ CI/CD íŒŒì´í”„ë¼ì¸ ë° ë°°í¬ ìë™í™”**
- GitHub Actions ê¸°ë°˜ CI/CD êµ¬í˜„
- ë‹¤ì¤‘ í™˜ê²½ ë°°í¬ ì „ëµ (dev/staging/prod)
- ìë™í™”ëœ í’ˆì§ˆ ê²€ì¦ (í…ŒìŠ¤íŠ¸, ë¦°íŠ¸, íƒ€ì… ê²€ì‚¬)
- ì„±ëŠ¥ ê²Œì´íŠ¸ ë° ë³´ì•ˆ ìŠ¤ìº”
- ë¡¤ë°± ë° ë¬´ì¤‘ë‹¨ ë°°í¬

---

## ğŸ‘¤ **ì‚¬ìš©ì ìŠ¤í† ë¦¬**

**ê°œë°œíŒ€ìœ¼ë¡œì„œ, ìš°ë¦¬ëŠ”:**
1. ì½”ë“œ í‘¸ì‹œ ì‹œ ìë™ìœ¼ë¡œ ëª¨ë“  ê²€ì¦ì´ ì‹¤í–‰ë˜ê¸°ë¥¼ ì›í•œë‹¤
2. í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ ë°°í¬ê°€ ìë™ìœ¼ë¡œ ì°¨ë‹¨ë˜ê¸°ë¥¼ ì›í•œë‹¤
3. ìŠ¤í…Œì´ì§•ì—ì„œ ê²€ì¦ í›„ í”„ë¡œë•ì…˜ì— ì•ˆì „í•˜ê²Œ ë°°í¬í•˜ê³  ì‹¶ë‹¤
4. ë¬¸ì œ ë°œìƒ ì‹œ ë¹ ë¥´ê²Œ ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±í•˜ê³  ì‹¶ë‹¤
5. ë°°í¬ ìƒíƒœì™€ ë©”íŠ¸ë¦­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ì‹¶ë‹¤

---

## ğŸ—ï¸ **ê¸°ìˆ ì  êµ¬í˜„ ìš”êµ¬ì‚¬í•­**

### **1. GitHub Actions ì›Œí¬í”Œë¡œìš°**

**ë©”ì¸ CI/CD íŒŒì´í”„ë¼ì¸**
```yaml
# .github/workflows/ci-cd.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]
  release:
    types: [published]

env:
  NODE_VERSION: '18'
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}

jobs:
  # ì˜ì¡´ì„± ë° ìºì‹œ ì„¤ì •
  setup:
    runs-on: ubuntu-latest
    outputs:
      cache-key: ${{ steps.cache-key.outputs.key }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Generate cache key
        id: cache-key
        run: echo "key=node-modules-${{ hashFiles('**/package-lock.json') }}" >> $GITHUB_OUTPUT

      - name: Cache dependencies
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: ${{ steps.cache-key.outputs.key }}
          restore-keys: |
            node-modules-

      - name: Install dependencies
        run: npm ci

  # ì½”ë“œ í’ˆì§ˆ ê²€ì¦
  code-quality:
    needs: setup
    runs-on: ubuntu-latest
    strategy:
      matrix:
        check: [lint, typecheck, format]
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Cache dependencies
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: ${{ needs.setup.outputs.cache-key }}

      - name: Install dependencies
        run: npm ci

      - name: Run ESLint
        if: matrix.check == 'lint'
        run: |
          npm run lint -- --format=json --output-file=eslint-results.json
          npm run lint

      - name: Run TypeScript check
        if: matrix.check == 'typecheck'
        run: npm run type-check

      - name: Check formatting
        if: matrix.check == 'format'
        run: npm run format:check

      - name: Upload lint results
        if: matrix.check == 'lint' && always()
        uses: actions/upload-artifact@v3
        with:
          name: lint-results
          path: eslint-results.json

  # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
  unit-tests:
    needs: setup
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Cache dependencies
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: ${{ needs.setup.outputs.cache-key }}

      - name: Install dependencies
        run: npm ci

      - name: Run unit tests
        run: |
          npm run test -- --coverage --watchAll=false --passWithNoTests
        env:
          CI: true

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          token: ${{ secrets.CODECOV_TOKEN }}
          file: ./coverage/lcov.info
          fail_ci_if_error: false

      - name: Upload test results
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: test-results
          path: |
            coverage/
            test-results.xml

  # ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸
  accessibility-tests:
    needs: setup
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Cache dependencies
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: ${{ needs.setup.outputs.cache-key }}

      - name: Install dependencies
        run: npm ci

      - name: Run accessibility tests
        run: npm run test:a11y

      - name: Upload a11y results
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: a11y-results
          path: a11y-results.json

  # E2E í…ŒìŠ¤íŠ¸
  e2e-tests:
    needs: [setup, unit-tests]
    runs-on: ubuntu-latest
    strategy:
      matrix:
        browser: [chromium, firefox, webkit]
        shard: [1/4, 2/4, 3/4, 4/4]
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Cache dependencies
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: ${{ needs.setup.outputs.cache-key }}

      - name: Install dependencies
        run: npm ci

      - name: Install Playwright
        run: npx playwright install ${{ matrix.browser }}

      - name: Build application
        run: npm run build

      - name: Run E2E tests
        run: npx playwright test --project=${{ matrix.browser }} --shard=${{ matrix.shard }}
        env:
          PLAYWRIGHT_HTML_REPORT: playwright-report-${{ matrix.browser }}-${{ matrix.shard }}

      - name: Upload Playwright report
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: playwright-report-${{ matrix.browser }}-${{ matrix.shard }}
          path: playwright-report-${{ matrix.browser }}-${{ matrix.shard }}/

  # ë³´ì•ˆ ìŠ¤ìº”
  security-scan:
    needs: setup
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run Trivy vulnerability scanner
        uses: aquasecurity/trivy-action@master
        with:
          scan-type: 'fs'
          scan-ref: '.'
          format: 'sarif'
          output: 'trivy-results.sarif'

      - name: Upload Trivy scan results to GitHub Security tab
        uses: github/codeql-action/upload-sarif@v3
        if: always()
        with:
          sarif_file: 'trivy-results.sarif'

      - name: Run Snyk to check for vulnerabilities
        uses: snyk/actions/node@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
        with:
          args: --severity-threshold=high --file=package.json

  # ë²ˆë“¤ ë¶„ì„
  bundle-analysis:
    needs: setup
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Cache dependencies
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: ${{ needs.setup.outputs.cache-key }}

      - name: Install dependencies
        run: npm ci

      - name: Build and analyze bundle
        run: npm run build:analyze
        env:
          ANALYZE: true

      - name: Upload bundle analysis
        uses: actions/upload-artifact@v3
        with:
          name: bundle-analysis
          path: .next/analyze/

      - name: Check bundle size
        run: |
          node scripts/check-bundle-size.js
          
  # ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
  performance-tests:
    needs: [setup, unit-tests]
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}

      - name: Cache dependencies
        uses: actions/cache@v3
        with:
          path: ~/.npm
          key: ${{ needs.setup.outputs.cache-key }}

      - name: Install dependencies
        run: npm ci

      - name: Build application
        run: npm run build

      - name: Start application
        run: |
          npm start &
          sleep 30

      - name: Run Lighthouse CI
        run: |
          npm install -g @lhci/cli@0.12.x
          lhci autorun
        env:
          LHCI_GITHUB_APP_TOKEN: ${{ secrets.LHCI_GITHUB_APP_TOKEN }}

      - name: Upload Lighthouse results
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: lighthouse-results
          path: .lighthouseci/

  # Docker ì´ë¯¸ì§€ ë¹Œë“œ
  build-image:
    needs: [code-quality, unit-tests, security-scan]
    runs-on: ubuntu-latest
    if: github.event_name == 'push' || github.event_name == 'release'
    outputs:
      image-digest: ${{ steps.build.outputs.digest }}
      image-tag: ${{ steps.meta.outputs.tags }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Log in to Container Registry
        uses: docker/login-action@v3
        with:
          registry: ${{ env.REGISTRY }}
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Extract metadata
        id: meta
        uses: docker/metadata-action@v5
        with:
          images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
          tags: |
            type=ref,event=branch
            type=ref,event=pr
            type=semver,pattern={{version}}
            type=semver,pattern={{major}}.{{minor}}
            type=sha,prefix=sha-

      - name: Build and push Docker image
        id: build
        uses: docker/build-push-action@v5
        with:
          context: .
          file: ./Dockerfile
          push: true
          tags: ${{ steps.meta.outputs.tags }}
          labels: ${{ steps.meta.outputs.labels }}
          cache-from: type=gha
          cache-to: type=gha,mode=max
          build-args: |
            NODE_VERSION=${{ env.NODE_VERSION }}
            BUILD_DATE=${{ github.event.head_commit.timestamp }}
            VCS_REF=${{ github.sha }}

  # ê°œë°œ í™˜ê²½ ë°°í¬
  deploy-dev:
    needs: [build-image, e2e-tests]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/develop' && github.event_name == 'push'
    environment:
      name: development
      url: https://dev.baro-calendar.com
    steps:
      - name: Deploy to development
        run: |
          echo "Deploying to development environment..."
          # Kubernetes/Helm deployment commands

      - name: Run smoke tests
        run: |
          curl -f https://dev.baro-calendar.com/health || exit 1

      - name: Notify deployment
        uses: 8398a7/action-slack@v3
        with:
          status: ${{ job.status }}
          channel: '#deployments'
          text: 'Development deployment completed'
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK }}

  # ìŠ¤í…Œì´ì§• í™˜ê²½ ë°°í¬
  deploy-staging:
    needs: [build-image, e2e-tests, performance-tests]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    environment:
      name: staging
      url: https://staging.baro-calendar.com
    steps:
      - name: Deploy to staging
        run: |
          echo "Deploying to staging environment..."

      - name: Run integration tests
        run: |
          npm run test:integration:staging

      - name: Performance regression check
        run: |
          npm run test:performance:staging

  # í”„ë¡œë•ì…˜ ë°°í¬
  deploy-production:
    needs: [deploy-staging]
    runs-on: ubuntu-latest
    if: github.event_name == 'release'
    environment:
      name: production
      url: https://baro-calendar.com
    steps:
      - name: Deploy to production
        run: |
          echo "Deploying to production environment..."

      - name: Run production health checks
        run: |
          scripts/health-check.sh production

      - name: Update monitoring
        run: |
          scripts/update-monitoring.sh ${{ github.event.release.tag_name }}

      - name: Notify success
        uses: 8398a7/action-slack@v3
        with:
          status: success
          channel: '#general'
          text: 'ğŸš€ Production deployment successful! Version: ${{ github.event.release.tag_name }}'
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK }}
```

### **2. Dockerfile ìµœì í™”**

**ë©€í‹°ìŠ¤í…Œì´ì§€ Docker ë¹Œë“œ**
```dockerfile
# Dockerfile
# Build stage
FROM node:18-alpine AS builder

WORKDIR /app

# ë³´ì•ˆ ì—…ë°ì´íŠ¸
RUN apk add --no-cache libc6-compat && \
    apk update && apk upgrade

# ì˜ì¡´ì„± ì„¤ì¹˜ (ìºì‹œ ìµœì í™”)
COPY package*.json ./
RUN npm ci --only=production && npm cache clean --force

# ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬ ë° ë¹Œë“œ
COPY . .
ARG NODE_ENV=production
ARG BUILD_DATE
ARG VCS_REF
RUN npm run build

# Runtime stage
FROM node:18-alpine AS runner

WORKDIR /app

# ë¹„íŠ¹ê¶Œ ì‚¬ìš©ì ìƒì„±
RUN addgroup -g 1001 -S nodejs && \
    adduser -S nextjs -u 1001

# í•„ìš”í•œ íŒŒì¼ë§Œ ë³µì‚¬
COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static

# ë©”íƒ€ë°ì´í„° ë¼ë²¨
LABEL org.opencontainers.image.title="Baro Calendar"
LABEL org.opencontainers.image.description="Project-based smart calendar management system"
LABEL org.opencontainers.image.created=$BUILD_DATE
LABEL org.opencontainers.image.revision=$VCS_REF
LABEL org.opencontainers.image.licenses="MIT"

# ë³´ì•ˆ ì„¤ì •
USER nextjs

EXPOSE 3000

ENV PORT=3000 \
    NODE_ENV=production \
    NEXT_TELEMETRY_DISABLED=1

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:3000/api/health || exit 1

CMD ["node", "server.js"]
```

### **3. í™˜ê²½ë³„ ì„¤ì • ê´€ë¦¬**

**í™˜ê²½ ì„¤ì • íŒŒì¼**
```typescript
// config/environments.ts
export const environments = {
  development: {
    API_URL: 'http://localhost:3001',
    WS_URL: 'ws://localhost:3001',
    SENTRY_DSN: '',
    ANALYTICS_ID: '',
    LOG_LEVEL: 'debug',
  },
  staging: {
    API_URL: 'https://api-staging.baro-calendar.com',
    WS_URL: 'wss://ws-staging.baro-calendar.com',
    SENTRY_DSN: process.env.SENTRY_DSN_STAGING,
    ANALYTICS_ID: process.env.ANALYTICS_ID_STAGING,
    LOG_LEVEL: 'info',
  },
  production: {
    API_URL: 'https://api.baro-calendar.com',
    WS_URL: 'wss://ws.baro-calendar.com',
    SENTRY_DSN: process.env.SENTRY_DSN_PROD,
    ANALYTICS_ID: process.env.ANALYTICS_ID_PROD,
    LOG_LEVEL: 'error',
  }
}

export const getConfig = () => {
  const env = process.env.NODE_ENV || 'development'
  return environments[env as keyof typeof environments]
}
```

### **4. í’ˆì§ˆ ê²Œì´íŠ¸ ìŠ¤í¬ë¦½íŠ¸**

**ë²ˆë“¤ í¬ê¸° ê²€ì¦**
```javascript
// scripts/check-bundle-size.js
const fs = require('fs')
const path = require('path')

const BUNDLE_SIZE_LIMITS = {
  'main': 250 * 1024, // 250KB
  'vendor': 500 * 1024, // 500KB
  'total': 1000 * 1024, // 1MB
}

function getDirectorySize(dir) {
  let size = 0
  const files = fs.readdirSync(dir)
  
  files.forEach(file => {
    const filePath = path.join(dir, file)
    const stats = fs.statSync(filePath)
    
    if (stats.isDirectory()) {
      size += getDirectorySize(filePath)
    } else {
      size += stats.size
    }
  })
  
  return size
}

function checkBundleSize() {
  const buildDir = '.next'
  
  if (!fs.existsSync(buildDir)) {
    console.error('Build directory not found. Run `npm run build` first.')
    process.exit(1)
  }
  
  const totalSize = getDirectorySize(path.join(buildDir, 'static'))
  
  console.log(`Total bundle size: ${(totalSize / 1024).toFixed(2)} KB`)
  
  if (totalSize > BUNDLE_SIZE_LIMITS.total) {
    console.error(
      `âŒ Bundle size exceeded limit! ` +
      `${(totalSize / 1024).toFixed(2)} KB > ${(BUNDLE_SIZE_LIMITS.total / 1024).toFixed(2)} KB`
    )
    process.exit(1)
  }
  
  console.log('âœ… Bundle size check passed!')
}

checkBundleSize()
```

**ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸**
```javascript
// scripts/performance-test.js
const lighthouse = require('lighthouse')
const chromeLauncher = require('chrome-launcher')

const PERFORMANCE_THRESHOLDS = {
  performance: 90,
  accessibility: 95,
  'best-practices': 90,
  seo: 90,
  pwa: 80,
}

async function runLighthouse(url) {
  const chrome = await chromeLauncher.launch({chromeFlags: ['--headless']})
  
  const options = {
    logLevel: 'info',
    output: 'json',
    onlyCategories: Object.keys(PERFORMANCE_THRESHOLDS),
    port: chrome.port,
  }
  
  const runnerResult = await lighthouse(url, options)
  await chrome.kill()
  
  return runnerResult.lhr
}

async function checkPerformance(url) {
  console.log(`Running Lighthouse audit on ${url}...`)
  
  const results = await runLighthouse(url)
  const scores = {}
  let failed = false
  
  Object.keys(PERFORMANCE_THRESHOLDS).forEach(category => {
    const score = Math.round(results.categories[category].score * 100)
    const threshold = PERFORMANCE_THRESHOLDS[category]
    
    scores[category] = score
    
    if (score < threshold) {
      console.error(`âŒ ${category}: ${score} < ${threshold}`)
      failed = true
    } else {
      console.log(`âœ… ${category}: ${score} >= ${threshold}`)
    }
  })
  
  if (failed) {
    console.error('Performance test failed!')
    process.exit(1)
  }
  
  console.log('âœ… All performance tests passed!')
  return scores
}

const url = process.argv[2] || 'http://localhost:3000'
checkPerformance(url).catch(console.error)
```

### **5. Kubernetes ë°°í¬ ì„¤ì •**

**Helm ì°¨íŠ¸**
```yaml
# charts/baro-calendar/values.yaml
replicaCount: 3

image:
  repository: ghcr.io/your-org/baro-calendar
  pullPolicy: IfNotPresent
  tag: ""

service:
  type: ClusterIP
  port: 80
  targetPort: 3000

ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
  hosts:
    - host: baro-calendar.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: baro-calendar-tls
      hosts:
        - baro-calendar.com

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

autoscaling:
  enabled: true
  minReplicas: 3
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

nodeSelector: {}
tolerations: []
affinity: {}

env:
  - name: NODE_ENV
    value: "production"
  - name: DATABASE_URL
    valueFrom:
      secretKeyRef:
        name: database-secret
        key: url

probes:
  liveness:
    enabled: true
    path: /api/health
    initialDelaySeconds: 30
    periodSeconds: 10
  readiness:
    enabled: true
    path: /api/ready
    initialDelaySeconds: 5
    periodSeconds: 5
```

### **6. ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼**

**ë°°í¬ ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸**
```bash
#!/bin/bash
# scripts/monitor-deployment.sh

ENVIRONMENT=$1
RELEASE_VERSION=$2
SLACK_WEBHOOK=$3

echo "Monitoring deployment for $ENVIRONMENT..."

# Health check
check_health() {
  local url="https://$ENVIRONMENT.baro-calendar.com/api/health"
  local response=$(curl -s -o /dev/null -w "%{http_code}" $url)
  
  if [ $response -eq 200 ]; then
    echo "âœ… Health check passed"
    return 0
  else
    echo "âŒ Health check failed: $response"
    return 1
  fi
}

# Performance check
check_performance() {
  local url="https://$ENVIRONMENT.baro-calendar.com"
  node scripts/performance-test.js $url
}

# Database connectivity
check_database() {
  # Add database connectivity check
  echo "âœ… Database connectivity check passed"
}

# Send notification
send_notification() {
  local status=$1
  local message=$2
  
  if [ -n "$SLACK_WEBHOOK" ]; then
    curl -X POST -H 'Content-type: application/json' \
      --data "{\"text\":\"$status Deployment $message for $ENVIRONMENT (v$RELEASE_VERSION)\"}" \
      $SLACK_WEBHOOK
  fi
}

# Main monitoring loop
main() {
  echo "Starting post-deployment monitoring..."
  
  # Wait for deployment to settle
  sleep 30
  
  # Run checks
  if check_health && check_performance && check_database; then
    echo "ğŸ‰ Deployment monitoring completed successfully!"
    send_notification "âœ…" "completed successfully"
    exit 0
  else
    echo "âŒ Deployment monitoring failed!"
    send_notification "âŒ" "failed"
    exit 1
  fi
}

main
```

### **7. ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸**

**ìë™ ë¡¤ë°± ì‹œìŠ¤í…œ**
```bash
#!/bin/bash
# scripts/rollback.sh

ENVIRONMENT=$1
PREVIOUS_VERSION=$2

echo "Rolling back $ENVIRONMENT to version $PREVIOUS_VERSION..."

# Kubernetes rollback
kubectl rollout undo deployment/baro-calendar-$ENVIRONMENT --to-revision=$PREVIOUS_VERSION

# Wait for rollback to complete
kubectl rollout status deployment/baro-calendar-$ENVIRONMENT --timeout=300s

# Verify rollback
if check_health $ENVIRONMENT; then
  echo "âœ… Rollback completed successfully"
  send_slack_notification "ğŸ”„ Rollback to v$PREVIOUS_VERSION completed for $ENVIRONMENT"
else
  echo "âŒ Rollback failed"
  send_slack_notification "âŒ Rollback failed for $ENVIRONMENT"
  exit 1
fi
```

---

## ğŸ“Š **í’ˆì§ˆ ë©”íŠ¸ë¦­ ë° KPI**

### **CI/CD ë©”íŠ¸ë¦­**
- ë¹Œë“œ ì„±ê³µë¥ : 95% ì´ìƒ
- í‰ê·  ë¹Œë“œ ì‹œê°„: 10ë¶„ ì´í•˜
- ë°°í¬ ë¹ˆë„: ì£¼ë‹¹ 5íšŒ ì´ìƒ
- í‰ê·  ë°°í¬ ì‹œê°„: 5ë¶„ ì´í•˜
- ë¡¤ë°± ë¹ˆë„: 5% ì´í•˜

### **ì½”ë“œ í’ˆì§ˆ ë©”íŠ¸ë¦­**
- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€: 90% ì´ìƒ
- ì½”ë“œ ì¤‘ë³µë„: 3% ì´í•˜
- ë¦°íŠ¸ ì—ëŸ¬: 0ê°œ
- ë³´ì•ˆ ì·¨ì•½ì : Critical 0ê°œ, High 2ê°œ ì´í•˜

---

## âœ… **Definition of Done**

### **ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­**
- [ ] GitHub Actions CI/CD íŒŒì´í”„ë¼ì¸ êµ¬í˜„
- [ ] ë‹¤ì¤‘ í™˜ê²½ ë°°í¬ ìë™í™” (dev/staging/prod)
- [ ] ìë™í™”ëœ í…ŒìŠ¤íŠ¸ ë° í’ˆì§ˆ ê²€ì¦
- [ ] ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ë°°í¬
- [ ] ë¡¤ë°± ë©”ì»¤ë‹ˆì¦˜

### **ê¸°ìˆ  ìš”êµ¬ì‚¬í•­**
- [ ] Docker ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ
- [ ] Kubernetes Helm ì°¨íŠ¸
- [ ] í™˜ê²½ë³„ ì„¤ì • ê´€ë¦¬
- [ ] ë³´ì•ˆ ìŠ¤ìº” í†µí•©

### **í’ˆì§ˆ ìš”êµ¬ì‚¬í•­**
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í›„ ë°°í¬
- [ ] ì„±ëŠ¥ ì„ê³„ê°’ ê²€ì¦
- [ ] ë²ˆë“¤ í¬ê¸° ì œí•œ ê²€ì¦
- [ ] ë³´ì•ˆ ì·¨ì•½ì  ìŠ¤ìº”

### **ëª¨ë‹ˆí„°ë§ ìš”êµ¬ì‚¬í•­**
- [ ] ë°°í¬ ìƒíƒœ ì•Œë¦¼
- [ ] ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- [ ] ì—ëŸ¬ìœ¨ ëª¨ë‹ˆí„°ë§
- [ ] ìë™ ë¡¤ë°± íŠ¸ë¦¬ê±°

---

## ğŸ“š **ê´€ë ¨ ë¬¸ì„œ ì°¸ì¡°**

- [22. CI Pipeline & Performance](../ui-architecture/22-ci-pipeline-performance.md)
- [23. Git Workflow Process](../ui-architecture/23-git-workflow-process.md)
- [21. Observability & Monitoring](../ui-architecture/21-observability-monitoring.md)

---

**ì´ ìŠ¤í† ë¦¬ëŠ” ë°”ë¡œìº˜ë¦°ë”ì˜ ì™„ì „í•œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬í˜„ì„ ìœ„í•œ ê¸°ìˆ  ê°€ì´ë“œì…ë‹ˆë‹¤. ì•ˆì •ì ì´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°°í¬ ìë™í™”ë¥¼ í†µí•´ ê°œë°œ ìƒì‚°ì„±ì„ ê·¹ëŒ€í™”í•˜ê³  ì„œë¹„ìŠ¤ í’ˆì§ˆì„ ë³´ì¥í•©ë‹ˆë‹¤.**